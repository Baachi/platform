<div class="comment-title">
    <% if (avatarUrl) { %>
        <img class="comment-title-avatar" src="<%- avatarUrl %>" />
    <% } else { %>
        <div class="comment-title-avatar no-avatar" />
    <% } %>
</div>

<div class="comment-content">
    <div class="comment-author-info">
        <% if (owner_id) {  %>
            <%= _.__('oro.comment.item.added',{
                user: '<a class="user nowrap" href="' + owner_url + '">' +  _.escape(owner) + '</a>',
                time: '<i class="date nowrap">' + createdTime + '</i>'
            }) %><% } %><% if (editor_id) { %>,
            <%= _.__('oro.comment.item.update',{
                user: '<a class="user nowrap" href="' + editor_url + '">' +  _.escape(editor) + '</a>',
                time: '<i class="date nowrap">' + updatedTime + '</i>'
            }) %>
        <% } %>
    </div>
    <div class="comment-body"><%= message %></div>
    <% if (attachmentURL) { %>
    <div class="comment-attachments">
        <div class="attachment-item">
            <div class="thumbnail">
            <% if (attachmentThumbnail) { %>
                <a href="<%- attachmentURL %>" data-gallery="comment-view-<%- relationId %>" class="no-hash" title="<%- attachmentFileName %>">
                    <span class="thumbnail" style="background: url('<%- attachmentThumbnail %>') 50% 50% no-repeat;"></span>
                </a>
            <% } else { %>
                    <i class="fa <%- attachmentIcon %> fa-3x"></i>
            <% } %>
            </div>
            <div class="dropdown link-to-record">
                <% var attachmentTogglerId = _.uniqueId('dropdown-') %>
                <a class="no-hash dropdown-toggle file-menu" id="<%- attachmentTogglerId %>" href="#" role="button"
                   data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <span class="fa <%- attachmentIcon %>" aria-hidden="true"></span> <%- attachmentFileName %>
                </a>
                <ul class="dropdown-menu file-menu" role="menu" aria-labelledby="<%- attachmentTogglerId %>">
                    <li>
                    <a class="no-hash" tabindex="-1" href="<%- attachmentURL %>">
                        <%= _.__('oro.comment.attachment.download') %><span>(<%- attachmentSize %>)</span>
                    </a>
                    <% if (attachmentThumbnail) { %>
                        <a class="view-image no-hash" tabindex="-1" data-gallery="comment-view-<%- relationId %>" href="<%- attachmentURL %>"><%= _.__('oro.comment.attachment.view') %></a>
                    <% } %>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <% } %>
</div>

<div class="comment-actions">
    <% if (hasActions) { %>
    <div class="more-bar-holder">
        <% var actionsTogglerId = _.uniqueId('dropdown-') %>
        <div class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle" href="#" role="button" id="<%- actionsTogglerId %>"
                                 aria-haspopup="true" aria-expanded="false" aria-label="<%- _.__('oro.comment.actions_label') %>">...</a>
            <ul class="dropdown-menu dropdown-menu-right launchers-dropdown-menu" role="menu" aria-labelledby="<%- actionsTogglerId %>">
                <li>
                    <ul class="nav nav-pills icons-holder launchers-list">
                        <% if (editable) { %>
                        <li class="launcher-item">
                            <a href="#" class="action item-edit-button" title="<%= _.__('oro.comment.action.update') %>">
                                <i class="fa-pencil-square-o hide-text"><%= _.__('oro.comment.action.update') %></i>
                            </a>
                        </li>
                        <% } %>
                        <% if (removable) { %>
                        <li class="launcher-item">
                            <a href="#" class="action item-remove-button" title="<%= _.__('oro.comment.action.delete') %>">
                                <i class="fa-trash-o hide-text"><%= _.__('oro.comment.action.delete') %></i>
                            </a>
                        </li>
                        <% } %>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
    <% } %>
</div>
