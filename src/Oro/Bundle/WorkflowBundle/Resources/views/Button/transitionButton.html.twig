{% import 'OroWorkflowBundle::macros.html.twig' as workflowMacros %}

{% set params = {
    workflowName: workflow.name,
    transitionName: transition.name,
    entityClass: context.entityClass,
    entityId: context.entityId,
    route: context.routeName,
    datagrid: context.datagridName,
    group: context.group,
} %}

{% if transition.displayType == 'dialog' %}
    {% if transition.hasForm() %}
        {% set transitionData = transitionData|merge({'dialog-url': path(transitionData['dialog-route'], params) }) %}
    {% endif %}
    {% set transitionData = transitionData|merge({'transition-url': path(transitionData['transition-route'], params) }) %}
{% else %}
    {% set transitionData = transitionData|merge({'transition-url': path(transitionData['page-route'], params) }) %}
{% endif %}

{% if not onlyLink|default(false) %}<div class="pull-left btn-group icons-holder">{% endif %}
    {{ workflowMacros.renderTransitionButton(
        workflow,
        transition,
	    workflowItem|default(null),
        transitionData,
	    onlyLink|default(false),
	    noIcon|default(false),
        noIconText|default(false)
    ) }}
{% if not onlyLink|default(false) %}</div>{% endif %}
