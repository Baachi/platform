/* @theme: admin.oro; */

.drop-area-marker {
    position: absolute;
    border: dashed 3px #ddd;
    width: 100%;
    background-color: rgba(255, 255, 255, .65);
    z-index: 1;
    box-sizing: border-box;
    margin-top: $spacerHeight;

    > span {
        text-transform: uppercase;
        font-size: 112%;
        font-weight: bold;
        display: block;
        transform: translate(-50%, -50%);
        position: absolute;
        top: 50%;
        left: 50%;
        color: #363946;
    }
}

.drop-area-over .drop-area-marker {
    display: none;
}

.condition-operator {
    margin: 6px 0;
    text-transform: uppercase;

    .btn-group {
        .btn {
            font-weight: bold;
            padding: 0 6px;
            height: auto;
            line-height: 20px;
        }

        .btn-mini .caret {
            margin-top: 9px;
        }
    }

    .dropdown-menu {
        min-width: initial;

        .selected > a {
            font-weight: bold;
        }
    }

    &.hide-operator {
        display: none;
    }
}

.conditions-group {
    width: 100%;
    list-style: none;
    margin: 0;
    padding: 0;
    box-sizing: border-box;

    &:before,
    &:after {
        content: "";
        display: block;
        height: $spacerHeight;
    }

    .sortable-placeholder {
        background-color: transparent;
        min-height: 50px;
        border: dashed 3px #e1e1e1;
        margin: 34px 0 0 0;
        position: relative;
    }

    .sortable-placeholder:nth-child(1),
    .condition-operator + .sortable-placeholder {
        margin-top: 0;
        margin-bottom: 34px;
    }

    .sortable-placeholder:only-child {
        margin: 0;
    }

    &.drag-start-from-first {
        > li.sortable-placeholder:nth-child(2) {
            margin-top: 0;
            margin-bottom: 34px;
        }
    }

    .condition {
        position: relative;

        &.controls {
            margin-left: 0;

            &.loading {
                background: transparent url(../../../oroui/img/loader.gif) no-repeat center;

                .condition-item > * {
                    visibility: hidden;
                    point-events: none;
                }
            }
        }

        .conditions-group {
            min-height: 138px;
        }

        .condition-item {
            border: 1px solid #e1e1e1;
            border-radius: 4px;
            padding: $horizontal-padding * .5 $vertical-padding * .8;

            input[type='text'] {
                margin-bottom: 0;
            }
        }

        & > .conditions-group {
            border-left: 3px solid #efefef;
            padding-left: $vertical-padding * .8;
        }

        & > .close {
            position: relative;
            margin-right: 4px;
            z-index: 1;
        }

        &[data-criteria^='conditions-group'] {
            & > .close {
                background-color: #fff;
                color: #ccc;
                opacity: 1;
                float: left;
                position: absolute;
                top: 50%;
                margin: -7px 0 0 -4px;
                height: 14px;
                line-height: 14px;
                z-index: 1;

                &:hover {
                    color: #999;
                }
            }

            &.validation-error > .close {
                margin-top: -17px;
            }
        }
    }
}

.filter-criteria {
    .hint {
        text-transform: uppercase;
        margin: 5px 0 3px 0;
        font-size: $base-font-size--s;
        text-align: center;
    }

    .criteria-list {
        list-style: none;
        margin: 0;
        padding: 0;

        .sortable-placeholder {
            display: none;
        }
    }

    .option[data-criteria] {
        background-color: #e6eaee;
        border: 1px solid #d3dbe3;
        border-radius: 3px;
        padding: 3px 8px;
        margin-bottom: 5px;

        @include cursor-grab();

        &.disabled {
            cursor: auto;
            color: #909090;
        }

        &.ui-grabbing {
            box-shadow: 2px 2px 5px 0 rgba(50, 50, 50, .7);
            z-index: 1200;

            @include cursor-grabbing();
        }
    }
}

.condition-item {
    .select2-container,
    .select2-choice,
    .select2-chosen {
        background: none;
        border: none;
    }

    .select2-container {
        width: auto;
        max-width: none;
        min-width: 32px;
        vertical-align: initial;
        display: block;
        margin-bottom: 4px;

        .select2-choice {
            box-shadow: none;
            border: none;
            padding: 0;
            color: $link-color;
            height: auto;

            &:hover,
            &:focus {
                color: $link-color-hover;
            }

            .select2-arrow {
                display: none;
            }

            .select2-chosen {
                padding-right: 8px;
            }
        }

        .select2-choice,
        .select2-chosen {
            line-height: 20px;
            display: inline;
            white-space: normal;

            span {
                display: inline;
                white-space: normal;
            }

            .entity-field-path > span:after {
                content: ' ';
                font-size: 0;
            }
        }
    }

    .datetime-visual-element {
        width: 120px;
    }

    .filter-item {
        padding-left: 0;
        vertical-align: baseline;
    }

    .open-filter .filter-criteria-selector {
        background: none;
    }

    button.select-filter-widget {
        @include btn-link();

        vertical-align: baseline;
        line-height: inherit;
        padding: 0;
    }

    .active-filter {
        display: inline;

        & > div,
        .dropdown,
        .dropup,
        .filter-select {
            display: inline;
        }

        .fields-row > .datefilter {
            display: inline-block;
            margin-bottom: 11px;
        }

        .caret {
            display: none;
        }

        .filter-update {
            display: none;
        }

        .choice-filter {
            >.btn-group {
                display: inline;

                .btn.dropdown-toggle {
                    @include btn-link();

                    padding-left: 0;
                    padding-right: 5px;
                }

                .dropdown-menu {
                    margin-top: 13px;
                }
            }

            .value-field-frame {
                display: inline;
                margin-left: 0 !important;
                padding-left: 0 !important;
            }

            .filter-value {
                display: inline;
            }
        }
    }

    .ui-timepicker-input {
        vertical-align: top;
    }
}

.condition-builder {
    border: 1px solid #c9c9c9;
    min-width: 582px;/* $TODO temporary solution, will be fixed in CRM-2025 */
    background-color: #eff2f5;

    & > div {
        display: flex;
    }

    .left-area.filter-criteria {
        padding: 0 $content-padding * .5 $content-padding * .5 - 4;
        width: 150px;
    }

    .right-area {
        display: flex;
        width: calc(100% - 150px);
        padding: 0 10px;
        border-left: 1px solid #c9c9c9;
        background-color: #fff;

        > div {
            position: relative;
            display: flex;
            width: 100%;
        }
    }

    .filter-start-date,
    .filter-end-date {
        display: inline-flex;
    }
}

.deleted-field {
    color: $error-text;
}

#oro_report-designer .form-horizontal {
    .query-designer-grouping-form {
        .control-group {
            float: none;
        }
    }
}
