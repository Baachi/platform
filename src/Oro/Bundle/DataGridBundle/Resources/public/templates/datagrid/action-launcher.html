<% obj.attributesTemplate = function(attributes) {
    _.each(attributes, function(attribute, name) { %>
        <%- name %><% if (!_.isNull(attribute)) { %>="<%- attribute %>"<% } %>
    <% });
} %>
<% var togglerId = _.uniqueId('dropdown-') %>

<% if (links) { %><div class="btn-group"><% } %>

<<%- tagName %>
    <% if (tagName == "a") { %> href="<%= link %>"<% } %>
    class="action
        <%- className ? className : '' %>
        <%- launcherMode == 'icon-only' ? 'btn btn-icon' : '' %>
        <%- !enabled ? 'disabled' : '' %>
        <%- launcherMode != '' ? 'mode-' +  launcherMode : '' %>
        <% if (links) { %> dropdown-toggle<% } %>"
    title="<%- title %>"
    <% attributesTemplate(attributes) %>
    <% if (links) { %> data-toggle="dropdown" role="button" id="<%- togglerId %>"
        aria-haspopup="true" aria-expanded="false" aria-label="<%- label %>"<% } %>>

    <% if (launcherMode == 'icon-text') { %>
        <span class="<%- iconClassName ? iconClassName : 'fa-' + icon %>" aria-hidden="true"></span>
        <%- label %>
    <% } else if (launcherMode == 'icon-only') { %>
        <span class="<%- iconClassName ? iconClassName : 'fa-' + icon %>" aria-hidden="true"></span>
    <% } else if (launcherMode == 'text-only') { %>
        <% if (iconClassName) { %><span class="<%- iconClassName %>" aria-hidden="true"></span><% } %>
        <%- label %>
    <% } %>

    <% if (links) { %><span class="caret" aria-hidden="true"></span><% } %>
</<%- tagName %>>

<% if (links) { %>
    <ul class="dropdown-menu" aria-labelledby="<%- togglerId %>">
    <% _.each(links, function(item, index) { %>
        <li><a href="<%- link %>" data-index="<%- index %>" title="<%- item.label %>"
            <% if (item.attributes) { attributesTemplate(item.attributes); } %>
            data-key="<%- item.key %>">
            <% if (launcherMode == 'icon-text') { %>
                <span class="<%- iconClassName ? iconClassName : 'fa-' + icon %>" aria-hidden="true"></span>
                <%- item.label %>
            <% } else if (launcherMode == 'icon-only') { %>
                <span class="<%- iconClassName ? iconClassName : 'fa-' + icon %>" aria-hidden="true"></span>
            <% } else if (launcherMode == 'text-only') { %>
                <% if (iconClassName) { %><span class="<%- iconClassName %>" aria-hidden="true"></span><% } %>
                <%- item.label %>
            <% } %>
        </a></li>
    <% }) %>
    </ul>
</div>
<% } %>
