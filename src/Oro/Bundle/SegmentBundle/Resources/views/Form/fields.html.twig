{% block oro_segment_filter_builder_widget %}
    {% import 'OroSegmentBundle::macros.html.twig' as segmentQD %}
    {% import 'OroQueryDesignerBundle::macros.html.twig' as QD %}

    {% set segment = form.vars.value %}
    {% set id = form.vars.id %}

    {{ form_widget(form.entity) }}
    {{ form_widget(form.definition) }}
    {{ segmentQD.query_designer_condition_builder({
        'id': id ~ '-condition-builder',
        'criteria_list_id': 'filter-criteria-list',
        'entity_choice_id': form.entity.vars.attr['data-ftid'],
        'currentSegmentId': segment.id|default(null),
        'page_limit': constant('\\Oro\\Bundle\\SegmentBundle\\Entity\\Manager\\SegmentManager::PER_PAGE')
    }) }}

    {{ QD.query_designer_column_chain_template('column-chain-template') }}
    {{ segmentQD.initJsWidgets(id, form, form.vars.entities, form.vars.metadata) }}
{% endblock %}
